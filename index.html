<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=yes, maximum-scale=1.0, minimum-scale=1.0">
    <meta name="description" content="P県 観光マップ 災害時避難マップ">
    <title>P県インフォメーション</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" />
    <link rel="stylesheet" type="text/css" media="all" href="css/style.css">
    <link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;700&display=swap" rel="stylesheet">
    <script type="text/javascript" src="js/script.js"></script>
    <script
        src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
        crossorigin="anonymous"></script>
</head>
<body>
    <header id="header">
        <h1 id="title">観光マップ</h1>
    </header>

    <div id="map"></div>

    <ul class="bottom-menu" id="bottom-menu">
        <li class="menu">
            <a href="#">
                <i class="fas fa-info-circle"></i><br>
                <span class="mini-text menu-notice">お知らせ</span>
            </a>
        </li>
    
        <li class="menu">
            <a href="#">
                <i class="fas fa-map-marked-alt"></i><br>
                <span class="mini-text menu-map">マップ</span>
            </a>
        </li>
    
        <li class="menu">
            <a href="#">
                <i class="fas fa-list-ul"></i><br>
                <span class="mini-text menu-list">一覧</span>
            </a>
        </li>
    
        <li class="menu">
            <a href="javascript:void(0);" onclick="clickSetting();">
                <i class="fas fa-user-cog"></i><br>
                <span class="mini-text menu-setting">設定</span>
            </a>
        </li>
    </ul>

    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"></script>
    <script>
        var map = L.map('map').setView([31.653586,131.019111], 18);

        var gsi = L.tileLayer('https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png', {
            attribution: "<a href='https://maps.gsi.go.jp/development/ichiran.html' target='_blank'>地理院タイル</a>"
        });

        var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: "© <a href='https://www.openstreetmap.org/copyright'>OpenStreetMap</a> contributors"
        });

        var sampleIcon = L.icon({
            iconUrl: 'sample.png',
            iconRetinaUrl: 'sample.png',
            iconSize: [50, 50],
            iconAnchor: [25, 50],
            popupAnchor: [0, -50],
        });

        var baseMaps = {
            "地理院地図" : gsi,
            "OpenStreetMap" : osm
        };
        L.control.layers(baseMaps).addTo(map);
        gsi.addTo(map);

        $.getJSON("./data/急傾斜地崩壊危険区域データ_鹿児島県_R2_曽於市.geojson", function(data) {
            var geojson = L.geoJson(data, {
                onEachFeature: function (feature, layer) {
                    layer.bindPopup(feature.properties.name);
                    //console.log(feature.properties.xcoord);
                    var xcoord = feature.properties.xcoord;
                    var ycoord = feature.properties.ycoord;
                    var marker = L.marker([ycoord,xcoord]).addTo(map);
                    marker.bindPopup("危険区域").openPopup();
                }
            });
            //L.geoJson(geojsonFeature).addTo(map);
            geojson.addTo(map);
        });

        var marker = L.marker([31.653586,131.019111]).addTo(map);
        marker.bindPopup("曽於市役所").openPopup();
    </script>
</body>
</html>